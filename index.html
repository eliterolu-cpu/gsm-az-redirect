<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>GsmAZ - Neon Grid AI</title>
  
  <link href='https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap' rel='stylesheet'/>
  <link href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css' rel='stylesheet'/>
  <script src='https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js'></script>

  <style>
    /* All your original neon cyberpunk CSS (unchanged) */
    :root {
      --neon-pink: #ff00ff;
      --neon-cyan: #00ffff;
      --neon-purple: #9d00ff;
      --glass: rgba(15, 10, 40, 0.7);
      --text: #e0f0ff;
      --bg-dark: #0a001a;
      --success: #00ff9d;
      --error: #ff3366;
    }

    * { margin:0; padding:0; box-sizing:border-box; }
    body { background: var(--bg-dark); color: var(--text); font-family: 'Inter', 'Segoe UI', sans-serif; font-size: 15px; line-height: 1.5; min-height: 100vh; position: relative; overflow-x: hidden; }

    body::before {
      content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background: repeating-linear-gradient(0deg, transparent, transparent 40px, rgba(0,255,255,0.05) 40px, rgba(0,255,255,0.05) 42px),
                  repeating-linear-gradient(90deg, transparent, transparent 40px, rgba(255,0,255,0.05) 40px, rgba(255,0,255,0.05) 42px);
      pointer-events: none; z-index: 1;
    }

    #particles-js { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 2; pointer-events: none; }

    .site-header { background: rgba(10, 0, 30, 0.8); backdrop-filter: blur(10px); border-bottom: 1px solid var(--neon-cyan); position: fixed; width: 100%; top: 0; z-index: 1000; }
    .header-container { max-width: 1200px; margin: 0 auto; padding: 12px 20px; display: flex; align-items: center; justify-content: space-between; }
    .logo { font-size: 24px; font-weight: 700; color: var(--neon-cyan); text-decoration: none; text-shadow: 0 0 15px var(--neon-cyan); }
    .header-right { display: flex; align-items: center; gap: 20px; }
    .auth-btn, .logout-btn { background: transparent; border: 2px solid var(--neon-cyan); color: var(--neon-cyan); padding: 8px 20px; border-radius: 30px; font-weight: bold; cursor: pointer; transition: 0.4s; }
    .auth-btn:hover, .logout-btn:hover { background: var(--neon-cyan); color: #000; box-shadow: 0 0 30px rgba(0,255,255,0.8); }
    .user-greeting { color: var(--neon-cyan); font-size: 14px; text-shadow: 0 0 10px var(--neon-cyan); }

    .page { display: none; }
    .page.active { display: block; }

    .main-content { max-width: 1100px; margin: 90px auto 40px; padding: 0 20px; position: relative; z-index: 3; text-align: center; }
    h1 { font-size: 3rem; text-shadow: 0 0 30px var(--neon-pink); margin: 60px 0 20px; }
    .tagline { font-size: 1.4rem; opacity: 0.9; margin-bottom: 50px; }

    .auth-container { background: var(--glass); backdrop-filter: blur(15px); border: 1px solid rgba(0,255,255,0.3); border-radius: 20px; padding: 40px; max-width: 500px; margin: 40px auto; box-shadow: 0 0 60px rgba(0,255,255,0.3); }
    .auth-form h2 { font-size: 2rem; color: var(--neon-cyan); margin-bottom: 30px; }
    .message { padding: 12px; border-radius: 10px; margin: 15px 0; font-size: 14px; text-align: center; }
    .message.success { background: rgba(0,255,157,0.2); border: 1px solid var(--success); color: var(--success); }
    .message.error { background: rgba(255,51,102,0.2); border: 1px solid var(--error); color: var(--error); }
    .form-group { margin-bottom: 20px; text-align: left; }
    label { display: block; margin-bottom: 8px; color: var(--neon-cyan); }
    input { width: 100%; padding: 14px; background: rgba(0,0,0,0.4); border: 2px solid var(--neon-purple); border-radius: 10px; color: var(--text); font-size: 15px; }
    input:focus { outline: none; border-color: var(--neon-cyan); box-shadow: 0 0 20px rgba(0,255,255,0.4); }
    .submit-btn { background: linear-gradient(45deg, var(--neon-cyan), var(--neon-pink)); color: #000; border: none; padding: 16px; width: 100%; border-radius: 30px; font-weight: bold; font-size: 16px; cursor: pointer; margin-top: 20px; transition: 0.4s; }
    .submit-btn:hover { box-shadow: 0 0 40px rgba(255,0,255,0.9); transform: scale(1.03); }
    .switch-link { margin-top: 20px; color: var(--neon-cyan); cursor: pointer; font-size: 14px; }
    .switch-link span { color: var(--neon-pink); text-decoration: underline; }

    /* Store styles (your original full CSS) */
    /* ... all your store CSS here (credit-balance, cart, checkout, etc.) ... */
  </style>
</head>

<body>
  <div id="particles-js"></div>

  <!-- Landing Page (not logged in) -->
  <div class="page active" id="landingPage">
    <header class="site-header">
      <div class="header-container">
        <a class="logo" href="#">ðŸ›¸ GsmAZ</a>
        <div class="header-right">
          <button class="auth-btn" id="loginBtn">Login</button>
          <button class="auth-btn" id="signupBtn">Sign Up</button>
        </div>
      </div>
    </header>

    <main class="main-content">
      <h1>Welcome to Neon Grid AI</h1>
      <p class="tagline">Unlock the power of advanced AI in a cyberpunk universe.</p>

      <div class="auth-container">
        <!-- Login Form -->
        <div class="auth-form" id="loginForm">
          <h2>Login</h2>
          <div id="loginMessage"></div>
          <form id="loginSubmit">
            <div class="form-group">
              <label>Email</label>
              <input type="email" id="loginEmail" placeholder="you@gsm.az" required/>
            </div>
            <div class="form-group">
              <label>Password</label>
              <input type="password" id="loginPass" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" required/>
            </div>
            <button type="submit" class="submit-btn">Login</button>
            <p class="switch-link"><span id="toForgot">Forgot Password?</span></p>
            <p class="switch-link" id="toSignup">New here? <span>Sign Up</span></p>
          </form>
        </div>

        <!-- Sign Up Form -->
        <div class="auth-form" id="signupForm" style="display:none;">
          <h2>Sign Up</h2>
          <div id="signupMessage"></div>
          <form id="signupSubmit">
            <div class="form-group">
              <label>Email</label>
              <input type="email" id="signupEmail" placeholder="you@gsm.az" required/>
            </div>
            <div class="form-group">
              <label>Password</label>
              <input type="password" id="signupPass" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢ (min 6 chars)" required/>
            </div>
            <button type="submit" class="submit-btn">Create Account</button>
            <p class="switch-link" id="toLogin">Already have an account? <span>Login</span></p>
          </form>
        </div>

        <!-- Forgot Password Form (NOW FULLY WORKING) -->
        <div class="auth-form" id="recoveryForm" style="display:none;">
          <h2>Forgot Password</h2>
          <div id="recoveryMessage"></div>
          <p style="font-size:14px; opacity:0.8; margin-bottom:25px;">Enter your email and we'll send you a password reset link.</p>
          <form id="recoverySubmit">
            <div class="form-group">
              <label>Email</label>
              <input type="email" id="recoveryEmail" placeholder="you@gsm.az" required/>
            </div>
            <button type="submit" class="submit-btn">Send Reset Link</button>
            <p class="switch-link" id="backToLogin"><span>Back to Login</span></p>
          </form>
        </div>
      </div>

      <!-- Services section -->
      <div class="services-section">
        <h2>Our AI Services</h2>
        <div class="services-grid">
          <!-- Your service cards -->
        </div>
      </div>
    </main>
  </div>

  <!-- Store Page (logged in) -->
  <div class="page" id="storePage">
    <!-- Your full store markup (header with logout, cart, products, etc.) -->
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, sendPasswordResetEmail, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyAl9uDtI1t3Hrp_Yh9LT4aFuT2vPcTH3nY",
      authDomain: "gsmaz-8f096.firebaseapp.com",
      projectId: "gsmaz-8f096",
      storageBucket: "gsmaz-8f096.firebasestorage.app",
      messagingSenderId: "579337455988",
      appId: "1:579337455988:web:40415e6cb4ffce0ffb0421"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    function showMessage(id, text, type = 'success') {
      const container = document.getElementById(id);
      container.innerHTML = `<div class="message ${type}">${text}</div>`;
      setTimeout(() => container.innerHTML = '', 6000);
    }

    onAuthStateChanged(auth, (user) => {
      if (user) {
        document.getElementById('landingPage').classList.remove('active');
        document.getElementById('storePage').classList.add('active');
        const username = user.email.split('@')[0];
        document.getElementById('userGreeting').textContent = `Hello, ${username}!`;
        initStore();
      } else {
        document.getElementById('storePage').classList.remove('active');
        document.getElementById('landingPage').classList.add('active');
      }
    });

    // Login
    document.getElementById('loginSubmit').onsubmit = async (e) => {
      e.preventDefault();
      const email = document.getElementById('loginEmail').value.trim();
      const password = document.getElementById('loginPass').value;
      try {
        await signInWithEmailAndPassword(auth, email, password);
        showMessage('loginMessage', 'Login successful!', 'success');
      } catch (error) {
        showMessage('loginMessage', error.message, 'error');
      }
    };

    // Sign Up
    document.getElementById('signupSubmit').onsubmit = async (e) => {
      e.preventDefault();
      const email = document.getElementById('signupEmail').value.trim();
      const password = document.getElementById('signupPass').value;
      try {
        await createUserWithEmailAndPassword(auth, email, password);
        showMessage('signupMessage', 'Account created! Logging in...', 'success');
      } catch (error) {
        showMessage('signupMessage', error.message, 'error');
      }
    };

    // Forgot Password - NOW FULLY WORKING
    document.getElementById('recoverySubmit').onsubmit = async (e) => {
      e.preventDefault();
      const email = document.getElementById('recoveryEmail').value.trim();
      if (!email) {
        showMessage('recoveryMessage', 'Please enter your email', 'error');
        return;
      }
      try {
        await sendPasswordResetEmail(auth, email);
        showMessage('recoveryMessage', 'Password reset link sent! Check your email.', 'success');
      } catch (error) {
        let msg = error.message;
        if (error.code === 'auth/user-not-found') {
          msg = 'No account found with this email.';
        }
        showMessage('recoveryMessage', msg, 'error');
      }
    };

    // Logout
    document.getElementById('logoutBtn').onclick = async () => {
      await signOut(auth);
    };

    // Form switching
    document.getElementById('toSignup').onclick = () => {
      document.getElementById('loginForm').style.display = 'none';
      document.getElementById('recoveryForm').style.display = 'none';
      document.getElementById('signupForm').style.display = 'block';
    };
    document.getElementById('toLogin').onclick = () => {
      document.getElementById('signupForm').style.display = 'none';
      document.getElementById('recoveryForm').style.display = 'none';
      document.getElementById('loginForm').style.display = 'block';
    };
    document.getElementById('toForgot').onclick = () => {
      document.getElementById('loginForm').style.display = 'none';
      document.getElementById('signupForm').style.display = 'none';
      document.getElementById('recoveryForm').style.display = 'block';
    };
    document.getElementById('backToLogin').onclick = () => {
      document.getElementById('recoveryForm').style.display = 'none';
      document.getElementById('loginForm').style.display = 'block';
    };

    // Particles
    particlesJS('particles-js', {
      "particles": { "number": { "value": 60 }, "color": { "value": ["#00ffff", "#ff00ff"] },
        "opacity": { "value": 0.6, "random": true }, "size": { "value": 3, "random": true },
        "line_linked": { "enable": true, "distance": 120, "color": "#00ffff", "opacity": 0.3, "width": 1 },
        "move": { "enable": true, "speed": 1.5 }
      },
      "interactivity": { "events": { "onhover": { "enable": true, "mode": "repulse" } } },
      "retina_detect": true
    });

    // Your full store script (products, cart, initStore, etc.)
    // Paste your original store JavaScript here

  </script>
</body>
</html>
